{"version":3,"sources":["node_modules\\hyperapp\\src\\index.js","src\\state.js","src\\lib\\lib.js","src\\components\\usertable.js","src\\components\\datatable.js","src\\components\\inputs.js","src\\components\\report\\demographics.js","src\\components\\report\\calc_item.js","src\\components\\report\\counts.js","src\\components\\report\\calc_score.js","src\\components\\report\\categories.js","src\\components\\report\\items.js","src\\components\\report\\sections.js","src\\components\\report\\exam.js","src\\components\\report\\report.js","src\\view.js","node_modules\\debounce-promise\\dist\\index.js","src\\actions\\api.js","src\\actions\\records.js","src\\actions\\download_xml.js","src\\actions\\users.js","src\\actions\\actions.js","src\\app.js","node_modules\\parcel-bundler\\src\\builtins\\bundle-url.js","node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"],"names":["h","app","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","state","actions","view","container","map","rootElement","oldNode","recycleElement","lifecycle","skipRender","isRecycling","globalState","clone","wiredActions","wireStateToActions","scheduleRender","element","toLowerCase","call","childNodes","nodeType","nodeValue","resolveNode","render","patch","setTimeout","target","source","out","i","setPartialState","path","value","slice","getPartialState","action","data","result","then","concat","getKey","eventListener","event","currentTarget","events","type","updateAttribute","oldValue","isSvg","style","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldAttributes","cb","onupdate","removeChildren","ondestroy","removeElement","parent","done","removeChild","onremove","newElement","insertBefore","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","k","newKey","keyedNode","activity_id","users","user","lrsdata","items","seen","displaydata","uniq","ar","filter","v","s","indexOf","pluck","ele","arr","a","sortByProp","p","b","stripBadChars","str","replace","display_time","stamp","currentDate","Date","day","getDate","month","getMonth","year","getFullYear","hours","getHours","minutes","getMinutes","suffix","datestamp","record","context","timing","timestamp","timezone","time_from_seconds","time","hrs","Math","floor","mins","secs","round","hrstr","minstr","UserRow","clickFn","e","id","external_id","email","UserTable","select","LrsRow","row","user_id","item_id","verb","timer","total","chosen_answer","correct","DataTable","sort","TextInput","field","func","init","label","InputFields","get_records","user_select","Demographics","firstname","lastname","getByVerb","rs","find","correctAttempt","gradedAttempt","iscorrect","total_duration","reduce","t","r","toFixed","duration_of","correctAnswerLetter","item","letters","split","ga","guess","undefined","responses","forEach","displayText","err","console","warn","presented","attempted","completed","skipped","first","second","cor","groupByItemId","rv","x","el","sortAndGroupRecords","lrs","ITEMS","count_correct","tot","count_incorrect","count_skipped","percentage_correct","Categories","ItemGroup","records","Items","ir","Sections","Exam","DocXML","Report","no_user","get_users","selected_user","endpoint","fetch_lrsdata","fetch","res","json","get_lrsdata","log","set_lrsdata","log_state","sequence","previousMeasures","values","download","filename","body","encodeURIComponent","innerHTML","display","getElementById","click","setup_download_button","prefix","window","__state","fetch_users","set_users","uu","u","bundleURL","getBundleURLCached","getBundleURL","Error","matches","stack","match","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","now","parentNode","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAgBA,IAAAA;QA4BAC,MAAAA;AA5BT,SAASD,CAAT,CAAWE,IAAX,EAAiBC,UAAjB,EAA6B;AAClC,MAAIC,OAAO,EAAX;AACA,MAAIC,WAAW,EAAf;AACA,MAAIC,SAASC,UAAUD,MAAvB;;AAEA,SAAOA,WAAW,CAAlB,EAAqBF,KAAKI,IAAL,CAAUD,UAAUD,MAAV,CAAV;;AAErB,SAAOF,KAAKE,MAAZ,EAAoB;AAClB,QAAIG,OAAOL,KAAKM,GAAL,EAAX;AACA,QAAID,QAAQA,KAAKC,GAAjB,EAAsB;AACpB,WAAKJ,SAASG,KAAKH,MAAnB,EAA2BA,QAA3B,GAAuC;AACrCF,aAAKI,IAAL,CAAUC,KAAKH,MAAL,CAAV;AACD;AACF,KAJD,MAIO,IAAIG,QAAQ,IAAR,IAAgBA,SAAS,IAAzB,IAAiCA,SAAS,KAA9C,EAAqD;AAC1DJ,eAASG,IAAT,CAAcC,IAAd;AACD;AACF;;AAED,SAAO,OAAOP,IAAP,KAAgB,UAAhB,GACHA,KAAKC,cAAc,EAAnB,EAAuBE,QAAvB,CADG,GAEH;AACEM,cAAUT,IADZ;AAEEC,gBAAYA,cAAc,EAF5B;AAGEE,cAAUA,QAHZ;AAIEO,SAAKT,cAAcA,WAAWS;AAJhC,GAFJ;AAQD;;AAEM,SAASX,GAAT,CAAaY,KAAb,EAAoBC,OAApB,EAA6BC,IAA7B,EAAmCC,SAAnC,EAA8C;AACnD,MAAIC,MAAM,GAAGA,GAAb;AACA,MAAIC,cAAeF,aAAaA,UAAUX,QAAV,CAAmB,CAAnB,CAAd,IAAwC,IAA1D;AACA,MAAIc,UAAUD,eAAeE,eAAeF,WAAf,CAA7B;AACA,MAAIG,YAAY,EAAhB;AACA,MAAIC,UAAJ;AACA,MAAIC,cAAc,IAAlB;AACA,MAAIC,cAAcC,MAAMZ,KAAN,CAAlB;AACA,MAAIa,eAAeC,mBAAmB,EAAnB,EAAuBH,WAAvB,EAAoCC,MAAMX,OAAN,CAApC,CAAnB;;AAEAc;;AAEA,SAAOF,YAAP;;AAEA,WAASN,cAAT,CAAwBS,OAAxB,EAAiC;AAC/B,WAAO;AACLlB,gBAAUkB,QAAQlB,QAAR,CAAiBmB,WAAjB,EADL;AAEL3B,kBAAY,EAFP;AAGLE,gBAAUY,IAAIc,IAAJ,CAASF,QAAQG,UAAjB,EAA6B,UAASH,OAAT,EAAkB;AACvD,eAAOA,QAAQI,QAAR,KAAqB,CAArB,CAAuB;AAAvB,UACHJ,QAAQK,SADL,GAEHd,eAAeS,OAAf,CAFJ;AAGD,OAJS;AAHL,KAAP;AASD;;AAED,WAASM,WAAT,CAAqB1B,IAArB,EAA2B;AACzB,WAAO,OAAOA,IAAP,KAAgB,UAAhB,GACH0B,YAAY1B,KAAKe,WAAL,EAAkBE,YAAlB,CAAZ,CADG,GAEHjB,QAAQ,IAAR,GACEA,IADF,GAEE,EAJN;AAKD;;AAED,WAAS2B,MAAT,GAAkB;AAChBd,iBAAa,CAACA,UAAd;;AAEA,QAAIb,OAAO0B,YAAYpB,IAAZ,CAAX;;AAEA,QAAIC,aAAa,CAACM,UAAlB,EAA8B;AAC5BJ,oBAAcmB,MAAMrB,SAAN,EAAiBE,WAAjB,EAA8BC,OAA9B,EAAwCA,UAAUV,IAAlD,CAAd;AACD;;AAEDc,kBAAc,KAAd;;AAEA,WAAOF,UAAUf,MAAjB,EAAyBe,UAAUX,GAAV;AAC1B;;AAED,WAASkB,cAAT,GAA0B;AACxB,QAAI,CAACN,UAAL,EAAiB;AACfA,mBAAa,IAAb;AACAgB,iBAAWF,MAAX;AACD;AACF;;AAED,WAASX,KAAT,CAAec,MAAf,EAAuBC,MAAvB,EAA+B;AAC7B,QAAIC,MAAM,EAAV;;AAEA,SAAK,IAAIC,CAAT,IAAcH,MAAd,EAAsBE,IAAIC,CAAJ,IAASH,OAAOG,CAAP,CAAT;AACtB,SAAK,IAAIA,CAAT,IAAcF,MAAd,EAAsBC,IAAIC,CAAJ,IAASF,OAAOE,CAAP,CAAT;;AAEtB,WAAOD,GAAP;AACD;;AAED,WAASE,eAAT,CAAyBC,IAAzB,EAA+BC,KAA/B,EAAsCL,MAAtC,EAA8C;AAC5C,QAAID,SAAS,EAAb;AACA,QAAIK,KAAKtC,MAAT,EAAiB;AACfiC,aAAOK,KAAK,CAAL,CAAP,IACEA,KAAKtC,MAAL,GAAc,CAAd,GACIqC,gBAAgBC,KAAKE,KAAL,CAAW,CAAX,CAAhB,EAA+BD,KAA/B,EAAsCL,OAAOI,KAAK,CAAL,CAAP,CAAtC,CADJ,GAEIC,KAHN;AAIA,aAAOpB,MAAMe,MAAN,EAAcD,MAAd,CAAP;AACD;AACD,WAAOM,KAAP;AACD;;AAED,WAASE,eAAT,CAAyBH,IAAzB,EAA+BJ,MAA/B,EAAuC;AACrC,QAAIE,IAAI,CAAR;AACA,WAAOA,IAAIE,KAAKtC,MAAhB,EAAwB;AACtBkC,eAASA,OAAOI,KAAKF,GAAL,CAAP,CAAT;AACD;AACD,WAAOF,MAAP;AACD;;AAED,WAASb,kBAAT,CAA4BiB,IAA5B,EAAkC/B,KAAlC,EAAyCC,OAAzC,EAAkD;AAChD,SAAK,IAAIF,GAAT,IAAgBE,OAAhB,EAAyB;AACvB,aAAOA,QAAQF,GAAR,CAAP,KAAwB,UAAxB,GACK,UAASA,GAAT,EAAcoC,MAAd,EAAsB;AACrBlC,gBAAQF,GAAR,IAAe,UAASqC,IAAT,EAAe;AAC5B,cAAIC,SAASF,OAAOC,IAAP,CAAb;;AAEA,cAAI,OAAOC,MAAP,KAAkB,UAAtB,EAAkC;AAChCA,qBAASA,OAAOH,gBAAgBH,IAAhB,EAAsBpB,WAAtB,CAAP,EAA2CV,OAA3C,CAAT;AACD;;AAED,cACEoC,UACAA,YAAYrC,QAAQkC,gBAAgBH,IAAhB,EAAsBpB,WAAtB,CAApB,CADA,IAEA,CAAC0B,OAAOC,IAHV,CAGe;AAHf,YAIE;AACAvB,6BACGJ,cAAcmB,gBACbC,IADa,EAEbnB,MAAMZ,KAAN,EAAaqC,MAAb,CAFa,EAGb1B,WAHa,CADjB;AAOD;;AAED,iBAAO0B,MAAP;AACD,SAtBD;AAuBD,OAxBD,CAwBGtC,GAxBH,EAwBQE,QAAQF,GAAR,CAxBR,CADJ,GA0BIe,mBACEiB,KAAKQ,MAAL,CAAYxC,GAAZ,CADF,EAEGC,MAAMD,GAAN,IAAaa,MAAMZ,MAAMD,GAAN,CAAN,CAFhB,EAGGE,QAAQF,GAAR,IAAea,MAAMX,QAAQF,GAAR,CAAN,CAHlB,CA1BJ;AA+BD;;AAED,WAAOE,OAAP;AACD;;AAED,WAASuC,MAAT,CAAgB5C,IAAhB,EAAsB;AACpB,WAAOA,OAAOA,KAAKG,GAAZ,GAAkB,IAAzB;AACD;;AAED,WAAS0C,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,WAAOA,MAAMC,aAAN,CAAoBC,MAApB,CAA2BF,MAAMG,IAAjC,EAAuCH,KAAvC,CAAP;AACD;;AAED,WAASI,eAAT,CAAyB9B,OAAzB,EAAkC3B,IAAlC,EAAwC2C,KAAxC,EAA+Ce,QAA/C,EAAyDC,KAAzD,EAAgE;AAC9D,QAAI3D,SAAS,KAAb,EAAoB,CACnB,CADD,MACO,IAAIA,SAAS,OAAb,EAAsB;AAC3B,WAAK,IAAIwC,CAAT,IAAcjB,MAAMmC,QAAN,EAAgBf,KAAhB,CAAd,EAAsC;AACpC,YAAIiB,QAAQjB,SAAS,IAAT,IAAiBA,MAAMH,CAAN,KAAY,IAA7B,GAAoC,EAApC,GAAyCG,MAAMH,CAAN,CAArD;AACA,YAAIA,EAAE,CAAF,MAAS,GAAb,EAAkB;AAChBb,kBAAQ3B,IAAR,EAAc6D,WAAd,CAA0BrB,CAA1B,EAA6BoB,KAA7B;AACD,SAFD,MAEO;AACLjC,kBAAQ3B,IAAR,EAAcwC,CAAd,IAAmBoB,KAAnB;AACD;AACF;AACF,KATM,MASA;AACL,UAAI5D,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,GAAnC,EAAwC;AACtCA,eAAOA,KAAK4C,KAAL,CAAW,CAAX,CAAP;;AAEA,YAAIjB,QAAQ4B,MAAZ,EAAoB;AAClB,cAAI,CAACG,QAAL,EAAeA,WAAW/B,QAAQ4B,MAAR,CAAevD,IAAf,CAAX;AAChB,SAFD,MAEO;AACL2B,kBAAQ4B,MAAR,GAAiB,EAAjB;AACD;;AAED5B,gBAAQ4B,MAAR,CAAevD,IAAf,IAAuB2C,KAAvB;;AAEA,YAAIA,KAAJ,EAAW;AACT,cAAI,CAACe,QAAL,EAAe;AACb/B,oBAAQmC,gBAAR,CAAyB9D,IAAzB,EAA+BoD,aAA/B;AACD;AACF,SAJD,MAIO;AACLzB,kBAAQoC,mBAAR,CAA4B/D,IAA5B,EAAkCoD,aAAlC;AACD;AACF,OAlBD,MAkBO,IACLpD,QAAQ2B,OAAR,IACA3B,SAAS,MADT,IAEAA,SAAS,MAFT,IAGAA,SAAS,WAHT,IAIAA,SAAS,YAJT,IAKAA,SAAS,WALT,IAMA,CAAC2D,KAPI,EAQL;AACAhC,gBAAQ3B,IAAR,IAAgB2C,SAAS,IAAT,GAAgB,EAAhB,GAAqBA,KAArC;AACD,OAVM,MAUA,IAAIA,SAAS,IAAT,IAAiBA,UAAU,KAA/B,EAAsC;AAC3ChB,gBAAQqC,YAAR,CAAqBhE,IAArB,EAA2B2C,KAA3B;AACD;;AAED,UAAIA,SAAS,IAAT,IAAiBA,UAAU,KAA/B,EAAsC;AACpChB,gBAAQsC,eAAR,CAAwBjE,IAAxB;AACD;AACF;AACF;;AAED,WAASkE,aAAT,CAAuB3D,IAAvB,EAA6BoD,KAA7B,EAAoC;AAClC,QAAIhC,UACF,OAAOpB,IAAP,KAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,QAA5C,GACI4D,SAASC,cAAT,CAAwB7D,IAAxB,CADJ,GAEI,CAACoD,QAAQA,SAASpD,KAAKE,QAAL,KAAkB,KAApC,IACE0D,SAASE,eAAT,CACE,4BADF,EAEE9D,KAAKE,QAFP,CADF,GAKE0D,SAASD,aAAT,CAAuB3D,KAAKE,QAA5B,CARR;;AAUA,QAAIR,aAAaM,KAAKN,UAAtB;AACA,QAAIA,UAAJ,EAAgB;AACd,UAAIA,WAAWqE,QAAf,EAAyB;AACvBnD,kBAAUb,IAAV,CAAe,YAAW;AACxBL,qBAAWqE,QAAX,CAAoB3C,OAApB;AACD,SAFD;AAGD;;AAED,WAAK,IAAIa,IAAI,CAAb,EAAgBA,IAAIjC,KAAKJ,QAAL,CAAcC,MAAlC,EAA0CoC,GAA1C,EAA+C;AAC7Cb,gBAAQ4C,WAAR,CACEL,cACG3D,KAAKJ,QAAL,CAAcqC,CAAd,IAAmBP,YAAY1B,KAAKJ,QAAL,CAAcqC,CAAd,CAAZ,CADtB,EAEEmB,KAFF,CADF;AAMD;;AAED,WAAK,IAAI3D,IAAT,IAAiBC,UAAjB,EAA6B;AAC3BwD,wBAAgB9B,OAAhB,EAAyB3B,IAAzB,EAA+BC,WAAWD,IAAX,CAA/B,EAAiD,IAAjD,EAAuD2D,KAAvD;AACD;AACF;;AAED,WAAOhC,OAAP;AACD;;AAED,WAAS6C,aAAT,CAAuB7C,OAAvB,EAAgC8C,aAAhC,EAA+CxE,UAA/C,EAA2D0D,KAA3D,EAAkE;AAChE,SAAK,IAAI3D,IAAT,IAAiBuB,MAAMkD,aAAN,EAAqBxE,UAArB,CAAjB,EAAmD;AACjD,UACEA,WAAWD,IAAX,OACCA,SAAS,OAAT,IAAoBA,SAAS,SAA7B,GACG2B,QAAQ3B,IAAR,CADH,GAEGyE,cAAczE,IAAd,CAHJ,CADF,EAKE;AACAyD,wBACE9B,OADF,EAEE3B,IAFF,EAGEC,WAAWD,IAAX,CAHF,EAIEyE,cAAczE,IAAd,CAJF,EAKE2D,KALF;AAOD;AACF;;AAED,QAAIe,KAAKrD,cAAcpB,WAAWqE,QAAzB,GAAoCrE,WAAW0E,QAAxD;AACA,QAAID,EAAJ,EAAQ;AACNvD,gBAAUb,IAAV,CAAe,YAAW;AACxBoE,WAAG/C,OAAH,EAAY8C,aAAZ;AACD,OAFD;AAGD;AACF;;AAED,WAASG,cAAT,CAAwBjD,OAAxB,EAAiCpB,IAAjC,EAAuC;AACrC,QAAIN,aAAaM,KAAKN,UAAtB;AACA,QAAIA,UAAJ,EAAgB;AACd,WAAK,IAAIuC,IAAI,CAAb,EAAgBA,IAAIjC,KAAKJ,QAAL,CAAcC,MAAlC,EAA0CoC,GAA1C,EAA+C;AAC7CoC,uBAAejD,QAAQG,UAAR,CAAmBU,CAAnB,CAAf,EAAsCjC,KAAKJ,QAAL,CAAcqC,CAAd,CAAtC;AACD;;AAED,UAAIvC,WAAW4E,SAAf,EAA0B;AACxB5E,mBAAW4E,SAAX,CAAqBlD,OAArB;AACD;AACF;AACD,WAAOA,OAAP;AACD;;AAED,WAASmD,aAAT,CAAuBC,MAAvB,EAA+BpD,OAA/B,EAAwCpB,IAAxC,EAA8C;AAC5C,aAASyE,IAAT,GAAgB;AACdD,aAAOE,WAAP,CAAmBL,eAAejD,OAAf,EAAwBpB,IAAxB,CAAnB;AACD;;AAED,QAAImE,KAAKnE,KAAKN,UAAL,IAAmBM,KAAKN,UAAL,CAAgBiF,QAA5C;AACA,QAAIR,EAAJ,EAAQ;AACNA,SAAG/C,OAAH,EAAYqD,IAAZ;AACD,KAFD,MAEO;AACLA;AACD;AACF;;AAED,WAAS7C,KAAT,CAAe4C,MAAf,EAAuBpD,OAAvB,EAAgCV,OAAhC,EAAyCV,IAAzC,EAA+CoD,KAA/C,EAAsD;AACpD,QAAIpD,SAASU,OAAb,EAAsB,CACrB,CADD,MACO,IAAIA,WAAW,IAAX,IAAmBA,QAAQR,QAAR,KAAqBF,KAAKE,QAAjD,EAA2D;AAChE,UAAI0E,aAAajB,cAAc3D,IAAd,EAAoBoD,KAApB,CAAjB;AACAoB,aAAOK,YAAP,CAAoBD,UAApB,EAAgCxD,OAAhC;;AAEA,UAAIV,WAAW,IAAf,EAAqB;AACnB6D,sBAAcC,MAAd,EAAsBpD,OAAtB,EAA+BV,OAA/B;AACD;;AAEDU,gBAAUwD,UAAV;AACD,KATM,MASA,IAAIlE,QAAQR,QAAR,IAAoB,IAAxB,EAA8B;AACnCkB,cAAQK,SAAR,GAAoBzB,IAApB;AACD,KAFM,MAEA;AACLiE,oBACE7C,OADF,EAEEV,QAAQhB,UAFV,EAGEM,KAAKN,UAHP,EAIG0D,QAAQA,SAASpD,KAAKE,QAAL,KAAkB,KAJtC;;AAOA,UAAI4E,WAAW,EAAf;AACA,UAAIC,WAAW,EAAf;AACA,UAAIC,cAAc,EAAlB;AACA,UAAIC,cAAcvE,QAAQd,QAA1B;AACA,UAAIA,WAAWI,KAAKJ,QAApB;;AAEA,WAAK,IAAIqC,IAAI,CAAb,EAAgBA,IAAIgD,YAAYpF,MAAhC,EAAwCoC,GAAxC,EAA6C;AAC3C+C,oBAAY/C,CAAZ,IAAiBb,QAAQG,UAAR,CAAmBU,CAAnB,CAAjB;;AAEA,YAAIiD,SAAStC,OAAOqC,YAAYhD,CAAZ,CAAP,CAAb;AACA,YAAIiD,UAAU,IAAd,EAAoB;AAClBJ,mBAASI,MAAT,IAAmB,CAACF,YAAY/C,CAAZ,CAAD,EAAiBgD,YAAYhD,CAAZ,CAAjB,CAAnB;AACD;AACF;;AAED,UAAIA,IAAI,CAAR;AACA,UAAIkD,IAAI,CAAR;;AAEA,aAAOA,IAAIvF,SAASC,MAApB,EAA4B;AAC1B,YAAIqF,SAAStC,OAAOqC,YAAYhD,CAAZ,CAAP,CAAb;AACA,YAAImD,SAASxC,OAAQhD,SAASuF,CAAT,IAAczD,YAAY9B,SAASuF,CAAT,CAAZ,CAAtB,CAAb;;AAEA,YAAIJ,SAASG,MAAT,CAAJ,EAAsB;AACpBjD;AACA;AACD;;AAED,YAAImD,UAAU,IAAV,IAAkBA,WAAWxC,OAAOqC,YAAYhD,IAAI,CAAhB,CAAP,CAAjC,EAA6D;AAC3D,cAAIiD,UAAU,IAAd,EAAoB;AAClBX,0BAAcnD,OAAd,EAAuB4D,YAAY/C,CAAZ,CAAvB,EAAuCgD,YAAYhD,CAAZ,CAAvC;AACD;AACDA;AACA;AACD;;AAED,YAAImD,UAAU,IAAV,IAAkBtE,WAAtB,EAAmC;AACjC,cAAIoE,UAAU,IAAd,EAAoB;AAClBtD,kBAAMR,OAAN,EAAe4D,YAAY/C,CAAZ,CAAf,EAA+BgD,YAAYhD,CAAZ,CAA/B,EAA+CrC,SAASuF,CAAT,CAA/C,EAA4D/B,KAA5D;AACA+B;AACD;AACDlD;AACD,SAND,MAMO;AACL,cAAIoD,YAAYP,SAASM,MAAT,KAAoB,EAApC;;AAEA,cAAIF,WAAWE,MAAf,EAAuB;AACrBxD,kBAAMR,OAAN,EAAeiE,UAAU,CAAV,CAAf,EAA6BA,UAAU,CAAV,CAA7B,EAA2CzF,SAASuF,CAAT,CAA3C,EAAwD/B,KAAxD;AACAnB;AACD,WAHD,MAGO,IAAIoD,UAAU,CAAV,CAAJ,EAAkB;AACvBzD,kBACER,OADF,EAEEA,QAAQyD,YAAR,CAAqBQ,UAAU,CAAV,CAArB,EAAmCL,YAAY/C,CAAZ,CAAnC,CAFF,EAGEoD,UAAU,CAAV,CAHF,EAIEzF,SAASuF,CAAT,CAJF,EAKE/B,KALF;AAOD,WARM,MAQA;AACLxB,kBAAMR,OAAN,EAAe4D,YAAY/C,CAAZ,CAAf,EAA+B,IAA/B,EAAqCrC,SAASuF,CAAT,CAArC,EAAkD/B,KAAlD;AACD;;AAED2B,mBAASK,MAAT,IAAmBxF,SAASuF,CAAT,CAAnB;AACAA;AACD;AACF;;AAED,aAAOlD,IAAIgD,YAAYpF,MAAvB,EAA+B;AAC7B,YAAI+C,OAAOqC,YAAYhD,CAAZ,CAAP,KAA0B,IAA9B,EAAoC;AAClCsC,wBAAcnD,OAAd,EAAuB4D,YAAY/C,CAAZ,CAAvB,EAAuCgD,YAAYhD,CAAZ,CAAvC;AACD;AACDA;AACD;;AAED,WAAK,IAAIA,CAAT,IAAc6C,QAAd,EAAwB;AACtB,YAAI,CAACC,SAAS9C,CAAT,CAAL,EAAkB;AAChBsC,wBAAcnD,OAAd,EAAuB0D,SAAS7C,CAAT,EAAY,CAAZ,CAAvB,EAAuC6C,SAAS7C,CAAT,EAAY,CAAZ,CAAvC;AACD;AACF;AACF;AACD,WAAOb,OAAP;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;Aa7YD;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKO,IAAMwM,sBAAO,SAAPA,IAAO;AAAA,MAAEpL,IAAF,QAAEA,IAAF;AAAA,MAAQpC,KAAR,QAAQA,KAAR;AAAA,SAClB;AAAA;AAAA;AACE,wBAAqBA,MAAMoF,IAAN,CAAWwD,WAAhC,SAA+C,wBAAc5I,MAAMoF,IAAN,CAAWiF,QAAzB,EAAmCpJ,WAAnC,EAA/C,SADF;AAEE,uBAAgB,KAFlB;AAGE,YAAK,cAHP;AAIE,oBAAa,UAJf;AAKE,qBAAc,mCALhB;AAME,qBAAe,oBAAUmB,KAAK,CAAL,CAAV,CANjB;AAOE,mBAAa,oBAAUA,KAAKA,KAAK3C,MAAL,GAAc,CAAnB,CAAV,CAPf;AAQE,gBAAU,+BAAe2C,IAAf,CARZ;AASE,oBAAa,GATf;AAUE,aAAM,KAVR;AAWE,oBAAc,+BAAcA,IAAd,CAXhB;AAYE,sBAAgB,iCAAgBA,IAAhB,CAZlB;AAaE,oBAAc,+BAAcA,IAAd,CAbhB;AAcE,mBAAY,GAdd;AAeE,oBAAa,EAff;AAgBE,uBAAgB;AAhBlB;AAkBE;AACE,kBAAY,+BAAcA,IAAd,CADd;AAEE,oBAAc,oCAAmBA,IAAnB,CAFhB;AAGE,qBAAc,GAHhB;AAIE,gBAAS,GAJX;AAKE,gBAAS,KALX;AAME,gBAAS;AANX,MAlBF;AA0BE,qBAAC,kBAAD,IAAU,MAAMA,IAAhB,EAAsB,OAAOpC,KAA7B,GA1BF;AA2BE,qBAAC,sBAAD,IAAY,MAAMoC,IAAlB,EAAwB,OAAOpC,KAA/B;AA3BF,GADkB;AAAA,CAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AXVA,IAAMyF,sBAAO,SAAPA,IAAO;AAAA,SAAMC,GAAGC,MAAH,CAAW,UAACC,CAAD,EAAI/D,CAAJ,EAAOgE,CAAP;AAAA,WAAaA,EAAEC,OAAF,CAAUF,CAAV,MAAiB/D,CAA9B;AAAA,GAAX,CAAN;AAAA,CAAb;AACA,IAAMkE,wBAAQ,SAARA,KAAQ,CAACC,GAAD;AAAA,SAAS,UAACC,GAAD;AAAA,WAASA,IAAI7F,GAAJ,CAAS;AAAA,aAAK8F,EAAEF,GAAF,CAAL;AAAA,KAAT,CAAT;AAAA,GAAT;AAAA,CAAd;AACA,IAAMG,kCAAa,SAAbA,UAAa,CAACC,CAAD;AAAA,SAAO,UAACF,CAAD,EAAGG,CAAH;AAAA,WAASH,EAAEE,CAAF,IAAOC,EAAED,CAAF,CAAP,GAAc,CAAC,CAAf,GAAoBF,EAAEE,CAAF,IAAOC,EAAED,CAAF,CAAP,GAAc,CAAd,GAAkB,CAA/C;AAAA,GAAP;AAAA,CAAnB;AACA,IAAME,wCAAgB,SAAhBA,aAAgB;AAAA,SAAOC,IAAIC,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,CAAP;AAAA,CAAtB;;AAEA,IAAMC,sCAAe,SAAfA,YAAe,CAACC,KAAD,EAAW;AACrC,MAAIC,cAAc,IAAIC,IAAJ,CAASF,KAAT,CAAlB;AAAA,MACEG,MAAMF,YAAYG,OAAZ,EADR;AAAA,MAEEC,QAAQJ,YAAYK,QAAZ,KAAyB,CAFnC;AAAA,MAGEC,OAAON,YAAYO,WAAZ,EAHT;AAAA,MAIEC,QAAQR,YAAYS,QAAZ,EAJV;AAAA,MAKEC,UAAUV,YAAaW,UAAb,EALZ;;AAOA,MAAID,UAAU,EAAd,EAAkB;AAChBA,cAAU,MAAMA,OAAhB;AACD;;AAED,MAAIE,SAASJ,SAAS,EAAT,GAAc,IAAd,GAAqB,IAAlC;AACA;AACAA,UAAQA,UAAU,CAAV,GAAc,EAAd,GAAmBA,KAA3B;AACA,SAAUF,IAAV,SAAkBF,KAAlB,SAA2BF,GAA3B,SAAkCM,KAAlC,SAA2CE,OAA3C,SAAsDE,MAAtD;AACD,CAhBM;AAiBA,IAAMC,gCAAY,SAAZA,SAAY,SAAU;AACjC,SAAOf,aAAagB,OAAOC,OAAP,CAAeC,MAAf,CAAsBC,SAAnC,IAAgD,GAAhD,GAAsDH,OAAOC,OAAP,CAAeC,MAAf,CAAsBE,QAAnF;AACD,CAFM;;AAKA,IAAMC,gDAAoB,SAApBA,iBAAoB,CAACC,IAAD,EAAU;AACzC,MAAIC,MAAMC,KAAKC,KAAL,CAAWH,OAAO,IAAlB,CAAV;AACA,MAAII,OAAOF,KAAKC,KAAL,CAAYH,OAAO,IAAR,GAAgB,EAA3B,CAAX;AACA,MAAIK,OAAOH,KAAKI,KAAL,CAAWN,OAAO,EAAlB,CAAX;AACA,MAAIO,QAAQN,MAAM,CAAN,GAAaA,GAAb,UAAuB,EAAnC;AACA,MAAIO,SAASJ,OAAO,CAAP,GAAcA,IAAd,UAAyB,EAAtC;AACA,cAAUG,KAAV,GAAkBC,MAAlB,GAA2BH,IAA3B;AACD,CAPM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AD3BA,IAAMpI,wBAAQ;AACnBkF,eAAa,sCADM;AAEnBC,SAAO,EAFY;AAGnBC,QAAM,EAHa;AAInBC,WAAS,EAJU;AAKnBC,SAAO,EALY;AAMnBC,QAAM,EANa;AAOnBC,eAAa;AAPM,CAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAP;;AACA;;AAEA,IAAMgD,UAAU,SAAVA,OAAU;AAAA,MAAEpD,IAAF,QAAEA,IAAF;AAAA,MAAQqD,OAAR,QAAQA,OAAR;AAAA,SACd;AAAA;AAAA;AACE;AAAA;AAAA,QAAI,SAAM,MAAV;AACE;AAAA;AAAA,UAAG,SAAU,iBAACC,CAAD;AAAA,mBAAOD,QAAQrD,KAAKuD,EAAb,CAAP;AAAA,WAAb;AAAwCvD,aAAKwD,WAAL,IAAoB,KAA5D;AAAA;AAAsExD,aAAKyD;AAA3E;AADF;AADF,GADc;AAAA,CAAhB;;AAQO,IAAMC,gCAAY,SAAZA,SAAY;AAAA,MAAG3D,KAAH,SAAGA,KAAH;AAAA,MAAU4D,MAAV,SAAUA,MAAV;AAAA,SACvB;AAAA;AAAA,MAAO,IAAG,WAAV;AACA;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAA;AADF,KADA;AAIA;AAAA;AAAA;AACG5D,YAAM/E,GAAN,CAAW;AAAA,eACV,iBAAC,OAAD,IAAS,MAAMgF,IAAf;AACE,mBAAS2D;AADX,UADU;AAAA,OAAX;AADH;AAJA,GADuB;AAAA,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXP;;AACA;;AAEA,IAAMC,SAAS,SAATA,MAAS;AAAA,MAAEC,GAAF,QAAEA,GAAF;AAAA,SACb;AAAA;AAAA;AACE;AAAA;AAAA,QAAI,SAAM,MAAV;AAAkBA,UAAIC;AAAtB,KADF;AAEE;AAAA;AAAA,QAAI,SAAM,MAAV;AAAkBD,UAAIvB,OAAJ,CAAYyB;AAA9B,KAFF;AAGE;AAAA;AAAA;AAAKF,UAAIG;AAAT,KAHF;AAIE;AAAA;AAAA;AAAK,kCAAkBH,IAAIvB,OAAJ,CAAYC,MAAZ,CAAmB0B,KAAnB,CAAyBC,KAA3C;AAAL,KAJF;AAKE;AAAA;AAAA;AAAKL,UAAIvB,OAAJ,CAAY6B;AAAjB,KALF;AAME;AAAA;AAAA;AAAKN,UAAIvB,OAAJ,CAAY8B,OAAZ,GAAsB,KAAtB,GAA8B;AAAnC,KANF;AAOE;AAAA;AAAA,QAAI,SAAM,MAAV;AAAkB,6BAAaP,IAAIvB,OAAJ,CAAYC,MAAZ,CAAmBC,SAAhC,CAAlB;AAAA;AAA+DqB,UAAIvB,OAAJ,CAAYC,MAAZ,CAAmBE;AAAlF,KAPF;AAQE;AAAA;AAAA,QAAI,SAAM,MAAV;AAAkB,6BAAaoB,IAAIrB,SAAjB;AAAlB;AARF,GADa;AAAA,CAAf;;AAaO,IAAM6B,gCAAY,SAAZA,SAAY;AAAA,MAAGrH,IAAH,SAAGA,IAAH;AAAA,SACvB;AAAA;AAAA,MAAO,IAAG,WAAV;AACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAA,OADF;AAEE;AAAA;AAAA;AAAA;AAAA,OAFF;AAGE;AAAA;AAAA;AAAA;AAAA,OAHF;AAIE;AAAA;AAAA;AAAA;AAAA,OAJF;AAKE;AAAA;AAAA;AAAA;AAAA,OALF;AAME;AAAA;AAAA;AAAA;AAAA,OANF;AAOE;AAAA;AAAA;AAAA;AAAA,OAPF;AAQE;AAAA;AAAA;AAAA;AAAA;AARF,KADF;AAWE;AAAA;AAAA;AACGA,WAAKsH,IAAL,CAAW,qBAAW,WAAX,CAAX,EAAqCtJ,GAArC,CAAyC;AAAA,eACxC,iBAAC,MAAD,IAAQ,KAAK6I,GAAb,GADwC;AAAA,OAAzC;AADH;AAXF,GADuB;AAAA,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBP;;AAEA,IAAMU,YAAY,SAAZA,SAAY;AAAA,MAAEC,KAAF,QAAEA,KAAF;AAAA,MAASC,IAAT,QAASA,IAAT;AAAA,MAAeC,IAAf,QAAeA,IAAf;AAAA,MAAqBC,KAArB,QAAqBA,KAArB;AAAA,SAChB;AAAA;AAAA,MAAO,OAAKH,KAAZ;AACE,eAAU;AAAA,eAAKC,KAAKC,IAAL,CAAL;AAAA;AADZ;AAGGC,SAHH;AAAA;AAIE;AACE,YAAMH,KADR;AAEE,YAAK,MAFP;AAGE,eAAM,YAHR;AAIE,aAAOE,IAJT;AAKE,eAAU;AAAA,eAAKD,KAAKnB,EAAEhH,MAAF,CAASM,KAAd,CAAL;AAAA;AALZ;AAJF,GADgB;AAAA,CAAlB;;AAeO,IAAMgI,oCAAc,SAAdA,WAAc;AAAA,MAAEhK,KAAF,SAAEA,KAAF;AAAA,MAASC,OAAT,SAASA,OAAT;AAAA,SACzB;AAAA;AAAA,MAAK,SAAM,QAAX;AACE,qBAAC,SAAD;AACE,aAAM,aADR;AAEE,YAAMA,QAAQgK,WAFhB;AAGE,YAAMjK,MAAMkF,WAHd;AAIE,aAAM;AAJR,MADF;AAOE,qBAAC,SAAD;AACE,aAAM,SADR;AAEE,YAAMjF,QAAQiK,WAFhB;AAGE,YAAMlK,MAAMoF,IAAN,CAAWuD,EAHnB;AAIE,aAAM;AAJR;AAPF,GADyB;AAAA,CAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBP;;AAEO,IAAMwB,sCAAe,SAAfA,YAAe;AAAA,MAAEnK,KAAF,QAAEA,KAAF;AAAA,SAC5B;AAAA;AAAA,MAAc,eAAc,EAA5B,EAA+B,cAAa,EAA5C,EAA+C,iBAAgB,EAA/D;AACE,sCAAa,MAAK,oBAAlB,EAAuC,OAAOA,MAAMoF,IAAN,CAAWgF,SAAzD,GADF;AAEE,sCAAa,MAAK,mBAAlB,EAAsC,OAAOpK,MAAMoF,IAAN,CAAWiF,QAAxD,GAFF;AAGE,sCAAa,MAAK,qBAAlB,EAAwC,OAAOrK,MAAMoF,IAAN,CAAWwD,WAA1D,GAHF;AAIE,sCAAa,MAAK,OAAlB,EAA0B,OAAO5I,MAAMoF,IAAN,CAAWyD,KAA5C;AAJF,GAD4B;AAAA,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFP,IAAMyB,YAAY,SAAZA,SAAY;AAAA,SAAQ;AAAA,WAAMC,GAAGC,IAAH,CAAS;AAAA,aAAK3I,EAAEuH,IAAF,KAAWA,IAAhB;AAAA,KAAT,CAAN;AAAA,GAAR;AAAA,CAAlB;AACA,IAAMqB,iBAAiB,SAAjBA,cAAiB;AAAA,SAAMF,GAAGC,IAAH,CAAQ;AAAA,WAAM3I,EAAE6F,OAAF,CAAU8B,OAAV,KAAsB,IAA5B;AAAA,GAAR,CAAN;AAAA,CAAvB;AACA,IAAMkB,gBAAgB,SAAhBA,aAAgB;AAAA,SAAMD,eAAeF,EAAf,KAAsBD,UAAU,gBAAV,EAA4BC,EAA5B,CAA5B;AAAA,CAAtB;;AAEO,IAAMI,gCAAY,SAAZA,SAAY;AAAA,SAAMF,eAAeF,EAAf,IAAqB,CAArB,GAAyB,CAA/B;AAAA,CAAlB;;AAEA,IAAMK,0CAAiB,SAAjBA,cAAiB;AAAA,SAC5BL,GAAGM,MAAH,CAAU,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAWD,IAAIC,EAAErD,OAAF,CAAUC,MAAV,CAAiB0B,KAAjB,CAAuBC,KAAtC;AAAA,GAAV,EAAwD,CAAxD,EAA2D0B,OAA3D,CAAmE,CAAnE,CAD4B;AAAA,CAAvB;;AAIA,IAAMC,oCAAc,SAAdA,WAAc;AAAA,SAAQ,cAAM;AACvC,QAAIF,IAAIT,UAAUlB,IAAV,EAAgBmB,EAAhB,CAAR;AACA,WAAOQ,IAAIA,EAAErD,OAAF,CAAUC,MAAV,CAAiB0B,KAAjB,CAAuBC,KAA3B,GAAmC,CAA1C;AACD,GAH0B;AAAA,CAApB;;AAKA,IAAM4B,oDAAsB,SAAtBA,mBAAsB,CAACX,EAAD,EAAKY,IAAL,EAAc;AAC/C,MAAMC,UAAU,QAAQC,KAAR,CAAc,EAAd,CAAhB;AACA,MAAMC,KAAKZ,cAAcH,EAAd,CAAX;AACA,MAAIlI,SAAS,EAACkJ,OAAO,EAAR,EAAY/B,SAAS,EAArB,EAAb;AACA,MAAI8B,OAAOE,SAAX,EAAsB;AACpB;AACA,WAAO,EAAP;AACD;AACD,MAAI;AACFL,SAAKM,SAAL,CAAeC,OAAf,CAAuB,UAACX,CAAD,EAAGlJ,CAAH,EAAS;AAC9B,UAAGkJ,EAAEY,WAAF,KAAkBL,GAAG5D,OAAH,CAAW6B,aAAhC,EAA+C;AAAElH,eAAOkJ,KAAP,GAAeH,QAAQvJ,CAAR,CAAf;AAA2B;AAC5E,UAAGkJ,EAAElI,IAAF,CAAO,CAAP,MAAc,SAAjB,EAA4B;AAAER,eAAOmH,OAAP,GAAiB4B,QAAQvJ,CAAR,CAAjB;AAA6B;AAC5D,KAHD;AAIA,WAAOQ,MAAP;AACD,GAND,CAOA,OAAOuJ,GAAP,EAAY;AACVC,YAAQC,IAAR,CAAa,IAAb,EAAkBvB,EAAlB;AACAsB,YAAQC,IAAR,CAAa,MAAb,EAAoBX,IAApB;AACAU,YAAQC,IAAR,CAAa,IAAb,EAAkBR,EAAlB;AACA,WAAO,EAAP;AACD;AAEF,CAtBM;;AAwBA,IAAMS,gCAAY,SAAZA,SAAY,CAACxB,EAAD,EAAKhF,IAAL;AAAA,SAAcA,QAAQgF,GAAG9K,MAAH,GAAY,CAApB,GAAwB,CAAxB,GAA4B,CAA1C;AAAA,CAAlB;AACA,IAAMuM,gCAAY,SAAZA,SAAY;AAAA,SAAMzB,GAAGC,IAAH,CAAQ;AAAA,WAAK3I,EAAEuH,IAAF,KAAW,eAAhB;AAAA,GAAR,IAA2C,CAA3C,GAA+C,CAArD;AAAA,CAAlB;AACA,IAAM6C,gCAAY,SAAZA,SAAY;AAAA,SAAMC,QAAQ3B,EAAR,IAAc,CAAd,GAAkB,CAAxB;AAAA,CAAlB;AACA,IAAM2B,4BAAU,SAAVA,OAAU,CAAC3B,EAAD,EAAKhF,IAAL,EAAc;AACnC,MAAI4G,QAAQ7B,UAAU,eAAV,EAA2BC,EAA3B,CAAZ;AACA,MAAI6B,SAAS9B,UAAU,gBAAV,EAA4BC,EAA5B,CAAb;AACA,MAAI8B,MAAM1B,UAAUJ,EAAV,CAAV;AACA,SAAO4B,SAAS,CAACE,GAAV,IAAiB,CAACD,MAAlB,GAA2B,CAA3B,GAA+B,CAAtC;AACD,CALM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AY1CP;;AAEA,IAAMsC,WAAW,SAAXA,QAAW,CAACC,QAAD,EAAWC,IAAX,EAAoB;AACnC,MAAI5N,UAAUwC,SAASD,aAAT,CAAuB,GAAvB,CAAd;AACAvC,UAAQqC,YAAR,CAAqB,MAArB,EAA6B,mCAAmCwL,mBAAmBD,IAAnB,CAAhE;AACA5N,UAAQqC,YAAR,CAAqB,UAArB,EAAiCsL,QAAjC;AACA3N,UAAQ8N,SAAR,GAAoB,iBAApB;AACA9N,UAAQiC,KAAR,CAAc8L,OAAd,GAAwB,MAAxB;AACAvL,WAASwL,cAAT,CAAwB,QAAxB,EAAkCpL,WAAlC,CAA8C5C,OAA9C;AACAA,UAAQiO,KAAR;AACAzL,WAASwL,cAAT,CAAwB,QAAxB,EAAkC1K,WAAlC,CAA8CtD,OAA9C;AACD,CATD;;AAWO,IAAMkO,wDAAwB,SAAxBA,qBAAwB,GAAM;AACzCrD,UAAQuC,GAAR,CAAY,uBAAZ;AACA5K,WAASwL,cAAT,CAAwB,oBAAxB,EAA8C7L,gBAA9C,CAA+D,OAA/D,EAAwE,YAAM;AAC5E,QAAMgM,SAAS,wCAAf;AACA,QAAMP,OAAOpL,SAASwL,cAAT,CAAwB,WAAxB,EAAqCF,SAAlD;AACA,QAAMH,WAAcS,OAAOC,OAAP,CAAejK,IAAf,CAAoBwD,WAAlC,SAAiD,wBAAcwG,OAAOC,OAAP,CAAejK,IAAf,CAAoBiF,QAAlC,EAA4CpJ,WAA5C,EAAjD,SAAN;AACAyN,aAASC,QAAT,EAAmBQ,SAAOP,IAA1B;AACD,GALD;AAMD,CARM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AXbP;;AAEA,IAAMtC,gBAAgB,SAAhBA,aAAgB,MAAO;AAC3B,SAAOrG,IAAI4E,MAAJ,CAAW,UAAC0B,EAAD,EAAKC,CAAL,EAAW;AAC3B,QAAI5G,IAAI4G,EAAE9E,OAAF,CAAUyB,OAAlB;AACA,QAAIsD,KAAKF,GAAG/B,IAAH,CAAQ,UAACO,CAAD;AAAA,aAAOA,KAAKA,EAAE,CAAF,EAAKrD,OAAL,CAAayB,OAAb,KAAyBvD,CAArC;AAAA,KAAR,CAAT;AACA,QAAI6G,EAAJ,EAAQ;AAAEA,SAAG9M,IAAH,CAAQ6M,CAAR;AAAa,KAAvB,MACK;AAAED,SAAG5M,IAAH,CAAQ,CAAC6M,CAAD,CAAR;AAAe;AACtB,WAAOD,EAAP;AACD,GANM,EAMJ,EANI,CAAP;AAOD,CARD;;AAUO,IAAMG,oDAAsB,SAAtBA,mBAAsB;AAAA,SACjCJ,cAAeK,IAAIjD,IAAJ,CAAS,qBAAW,WAAX,CAAT,CAAf,CADiC;AAAA,CAA5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZP;;AACA;;AAEA,IAAMkD,QAAQ,GAAd;;AAEO,IAAMC,wCAAgB,SAAhBA,aAAgB;AAAA,SAC3B,iCAAoBtC,EAApB,EAAwBM,MAAxB,CAA+B,UAACiC,GAAD,EAAMjL,CAAN;AAAA,WAAaiL,MAAM,0BAAUjL,CAAV,CAAnB;AAAA,GAA/B,EAAiE,CAAjE,CAD2B;AAAA,CAAtB;AAGA,IAAMkL,4CAAkB,SAAlBA,eAAkB;AAAA,SAC7B,iCAAoBxC,EAApB,EAAwBM,MAAxB,CAA+B,UAACiC,GAAD,EAAMjL,CAAN;AAAA,WAAaiL,OAAO,0BAAUjL,CAAV,IAAe,CAAf,GAAmB,CAA1B,CAAb;AAAA,GAA/B,EAA2E,CAA3E,CAD6B;AAAA,CAAxB;AAGA,IAAMmL,wCAAgB,SAAhBA,aAAgB;AAAA,SAAMJ,QAAQC,cAActC,EAAd,CAAR,GAA4BwC,gBAAgBxC,EAAhB,CAAlC;AAAA,CAAtB;AACA,IAAM0C,kDAAqB,SAArBA,kBAAqB;AAAA,SAAM,CAACJ,cAActC,EAAd,IAAoB,GAApB,GAA0BqC,KAA3B,EAAkC5B,OAAlC,CAA0C,CAA1C,CAAN;AAAA,CAA3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZP;;AACA;;AAIO,IAAMkC,kCAAa,SAAbA,UAAa;AAAA,MAAE9K,IAAF,QAAEA,IAAF;AAAA,MAAQpC,KAAR,QAAQA,KAAR;AAAA,SACxB;AAAA;AAAA;AACE,mCAAU,MAAK,cAAf;AACE,aAAM,KADR;AAEE,oBAAc,+BAAcoC,IAAd,CAFhB;AAGE,sBAAgB,iCAAgBA,IAAhB,CAHlB;AAIE,oBAAc,+BAAcA,IAAd,CAJhB;AAKE,mBAAY;AALd;AADF,GADwB;AAAA,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLP;;AACA;;AACA;;AAUA;AACA;AACA;;AAEA,IAAM+K,YAAY,SAAZA,SAAY;AAAA,MAAEC,OAAF,QAAEA,OAAF;AAAA,MAAWjC,IAAX,QAAWA,IAAX;AAAA,MAAiB5F,IAAjB,QAAiBA,IAAjB;AAAA,SAChB;AAAA;AAAA;AACE,UAAI6H,QAAQ,CAAR,EAAW1F,OAAX,CAAmByB,OADzB;AAEE,YAAMgC,KAAKvC,WAAL,CAAiB,CAAjB,CAFR;AAGE,cAAQ,0BAAUwE,OAAV,CAHV;AAIE,gBAAU,+BAAeA,OAAf,CAJZ;AAKE,4BAAsB,4BAAY,eAAZ,EAA6BA,OAA7B,CALxB;AAME,yBAAmB,4BAAY,gBAAZ,EAA8BA,OAA9B,CANrB;AAOE,6BAAuB,4BAAY,gBAAZ,EAA8BA,OAA9B,CAPzB;AAQE,cAAO,wBART;AASE,cAAO,GATT;AAUE,iBAAW,0BAAUA,OAAV,EAAmB7H,IAAnB,CAVb;AAWE,eAAS,0BAAU6H,OAAV;AAXX;AAaE;AACE,gBAAU,oCAAoBA,OAApB,EAA6BjC,IAA7B,EAAmCI,KAD/C;AAEE,uBAAiB,oCAAoB6B,OAApB,EAA6BjC,IAA7B,EAAmC3B,OAFtD;AAGE,aAAO,0BAAU4D,OAAV,CAHT;AAIE,gBAAS,GAJX;AAKE,gBAAS,GALX;AAME,gBAAS,GANX;AAOE,gBAAU,0BAAUA,OAAV,CAPZ;AAQE,eAAS,wBAAQA,OAAR,EAAiB7H,IAAjB,CARX;AASE,cAAO,GATT;AAbF,GADgB;AAAA,CAAlB;;AA2BO,IAAM8H,wBAAQ,SAARA,KAAQ;AAAA,MAAEjL,IAAF,SAAEA,IAAF;AAAA,MAAQpC,KAAR,SAAQA,KAAR;AAAA,SACnB,iCAAoBoC,IAApB,EACGhC,GADH,CACQ;AAAA,WAAO,iBAAC,SAAD,IAAW,SAASkN,EAApB;AACX,YAAMtN,MAAMsF,KAAN,CAAYK,MAAZ,CAAoB;AAAA,eAAK9D,EAAE8G,EAAF,KAAS2E,GAAG,CAAH,EAAM5F,OAAN,CAAcyB,OAA5B;AAAA,OAApB,EAAyD,CAAzD,CADK;AAEX,YAAMnJ,MAAMuF,IAAN,CAAWO,OAAX,CAAmBwH,GAAG,CAAH,EAAM5F,OAAN,CAAcyB,OAAjC,IAA4C,CAAC,CAFxC,GAAP;AAAA,GADR,CADmB;AAAA,CAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3CP;;AACA;;AACA;;AACA;;AACA;;AAKO,IAAMoE,8BAAW,SAAXA,QAAW;AAAA,MAAEnL,IAAF,QAAEA,IAAF;AAAA,MAAQpC,KAAR,QAAQA,KAAR;AAAA,SACtB;AAAA;AAAA;AACE;AAAA;AAAA,QAAS,MAAK,WAAd;AACE,eAAM,KADR;AAEE,sBAAc,+BAAcoC,IAAd,CAFhB;AAGE,wBAAgB,iCAAgBA,IAAhB,CAHlB;AAIE,sBAAc,+BAAcA,IAAd,CAJhB;AAKE,qBAAY,GALd;AAME,uBAAe,oBAAUA,KAAK,CAAL,CAAV,CANjB;AAOE,qBAAa,oBAAUA,KAAKA,KAAK3C,MAAL,GAAc,CAAnB,CAAV,CAPf;AAQE,kBAAU,+BAAe2C,IAAf;AARZ;AAUE;AACE,oBAAY,+BAAcA,IAAd,CADd;AAEE,sBAAc,oCAAmBA,IAAnB,CAFhB;AAGE,uBAAc,GAHhB;AAIE,kBAAS,GAJX;AAKE,kBAAS,KALX;AAME,kBAAS;AANX,QAVF;AAkBE,uBAAC,YAAD,IAAO,MAAMA,IAAb,EAAmB,OAAOpC,KAA1B;AAlBF;AADF,GADsB;AAAA,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AETP;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA,IAAMyN,SAAS,SAATA,MAAS;AAAA,MAAEzN,KAAF,QAAEA,KAAF;AAAA,SACb;AAAA;AAAA,MAAiB,OAAM,sDAAvB,EAA8E,SAAQ,KAAtF;AACE,qBAAC,0BAAD,IAAc,OAAOA,KAArB,GADF;AAEIA,UAAMwF,WAAN,CAAkB,CAAlB,IAAwB,iBAAC,UAAD,IAAM,MAAMxF,MAAMwF,WAAlB,EAA+B,OAAOxF,KAAtC,GAAxB,GAA2E;AAF/E,GADa;AAAA,CAAf;;AAOO,IAAM0N,0BAAS,SAATA,MAAS;AAAA,MAAE1N,KAAF,SAAEA,KAAF;AAAA,SACtB;AAAA;AAAA,MAAK,IAAG,QAAR;AACE;AAAA;AAAA,QAAQ,IAAG,oBAAX;AAAA;AAAA,KADF;AAEE;AAAA;AAAA,QAAI,SAAM,MAAV;AACE;AAAA;AAAA;AAAA;AAAeA,cAAMoF,IAAN,CAAWwD;AAA1B,OADF;AAEE;AAAA;AAAA;AAAA;AAAW5I,cAAMoF,IAAN,CAAWgF,SAAtB;AAAA;AAAkCpK,cAAMoF,IAAN,CAAWiF;AAA7C,OAFF;AAGE;AAAA;AAAA;AAAA;AAAcrK,cAAMwF,WAAN,CAAkB/F;AAAhC,OAHF;AAIE;AAAA;AAAA;AAAA;AAAmB,yCAAoBO,MAAMwF,WAA1B,EAAuC/F;AAA1D,OAJF;AAKE;AAAA;AAAA;AAAA;AAAc,uCAAcO,MAAMwF,WAApB;AAAd,OALF;AAME;AAAA;AAAA;AAAA;AAAY,yCAAgBxF,MAAMwF,WAAtB;AAAZ,OANF;AAOE;AAAA;AAAA;AAAA;AAAc,uCAAcxF,MAAMwF,WAApB;AAAd,OAPF;AAQE;AAAA;AAAA;AAAA;AAAY,4CAAmBxF,MAAMwF,WAAzB;AAAZ,OARF;AASE;AAAA;AAAA;AAAA;AAAe,oCAAkB,+BAAexF,MAAMwF,WAArB,CAAlB;AAAf;AATF,KAFF;AAaE;AAAA;AAAA,QAAQ,IAAG,WAAX;AACE,uBAAC,MAAD,IAAQ,OAAOxF,KAAf;AADF;AAbF,GADsB;AAAA,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBP;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAM2N,UAAU,SAAVA,OAAU;AAAA,SACd;AAAA;AAAA;AACA,eAAM,aADN;AAEA,eAAU;AAAA,eAAK1N,QAAQ2N,SAAR,EAAL;AAAA;AAFV;AAAA;AAAA,GADc;AAAA,CAAhB;;AAOA,IAAMC,gBAAgB,SAAhBA,aAAgB;AAAA,SACpB;AAAA;AAAA;AACE;AAAA;AAAA;AAAMzI,WAAKuD;AAAX,KADF;AAEIvD,SAAKyD;AAFT,GADoB;AAAA,CAAtB;;AAOO,IAAM3I,sBAAO,SAAPA,IAAO,CAACF,KAAD,EAAQC,OAAR;AAAA,SAClB;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAA,KADF;AAEE,qBAAC,mBAAD,IAAa,OAAOD,KAApB,EAA2B,SAASC,OAApC,GAFF;AAGE,gCAHF;AAIID,UAAMoF,IAAN,CAAWuD,EAAX,GAAgBkF,cAAc7N,MAAMoF,IAApB,CAAhB,GAA4CuI,QAAQ1N,OAAR,CAJhD;AAKE,qBAAC,cAAD,IAAQ,OAAOD,KAAf,GALF;AAME;AAAA;AAAA,QAAK,SAAM,QAAX;AACE,uBAAC,oBAAD,IAAW,OAAOA,MAAMmF,KAAxB,EAA+B,QAAQlF,QAAQiK,WAA/C,GADF;AAEE,uBAAC,oBAAD,IAAW,MAAMlK,MAAMwF,WAAvB;AAFF;AANF,GADkB;AAAA,CAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChFO,IAAMsI,8BAAW,4DAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAP;;;;AACA;;;;AAEA,IAAMC,gBAAgB,SAAhBA,aAAgB,CAAC7I,WAAD,EAAcgE,OAAd;AAAA,SACpB8E,MAASF,aAAT,wBAAoC5I,WAApC,iBAA2DgE,OAA3D,EACG5G,IADH,CACQ;AAAA,WAAO2L,IAAIC,IAAJ,EAAP;AAAA,GADR,CADoB;AAAA,CAAtB;AAGA,IAAMC,cAAc,+BAASJ,aAAT,EAAwB,GAAxB,CAApB;;AAEO,IAAM9D,oCAAc,SAAdA,WAAc;AAAA,MAAE/E,WAAF,QAAEA,WAAF;AAAA,MAAegE,OAAf,QAAeA,OAAf;AAAA,SAA4B,UAAClJ,KAAD,EAAQC,OAAR,EAAoB;AACzE4L,YAAQuC,GAAR,CAAY,aAAZ,EAA2BlJ,WAA3B,EAAwCgE,OAAxC;AACAiF,gBAAYjJ,WAAZ,EAAyBgE,OAAzB,EACG5G,IADH,CACQrC,QAAQoO,WADhB,EAEG/L,IAFH,CAEQrC,QAAQqO,SAFhB;AAGA,WAAO,EAAEpJ,wBAAF,EAAeM,aAAa,EAA5B,EAAP;AACD,GAN0B;AAAA,CAApB;;AAQA,IAAM6I,oCAAc,SAAdA,WAAc;AAAA,SACzB,EAAEhJ,SAASjD,IAAX,EAAiBoD,aAAapD,KAAKuK,GAAnC,EAAwCrH,OAAOlD,KAAKkD,KAApD,EAA2DC,MAAMnD,KAAKmM,QAAL,CAAcC,gBAAd,CAA+BC,MAAhG,EADyB;AAAA,CAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEhBP;;;;AACA;;AACA;;;;AAEA,IAAMa,cAAc,SAAdA,WAAc,CAACrP,OAAD;AAAA,SAClB+N,MAASF,aAAT,aACGxL,IADH,CACQ;AAAA,WAAO2L,IAAIC,IAAJ,EAAP;AAAA,GADR,CADkB;AAAA,CAApB;;AAIO,IAAMN,gCAAY,SAAZA,SAAY;AAAA,SAAM,UAAC5N,KAAD,EAAQC,OAAR,EAAoB;AACjD;AACAqP,gBAAYrP,OAAZ,EACGqC,IADH,CACQrC,QAAQsP,SADhB,EAEGjN,IAFH,CAEQrC,QAAQqO,SAFhB;AAGA,WAAO,EAAP;AACD,GANwB;AAAA,CAAlB;;AAQA,IAAMiB,gCAAY,SAAZA,SAAY,CAACpK,KAAD;AAAA,SAAY,EAAEA,YAAF,EAAZ;AAAA,CAAlB;;AAEA,IAAM+E,oCAAc,SAAdA,WAAc;AAAA,SAAW,UAAClK,KAAD,EAAQC,OAAR,EAAoB;AACxD4L,YAAQuC,GAAR,CAAY,SAAZ,EAAuBlF,OAAvB;AACAjJ,YAAQgK,WAAR,CAAoB,EAAC/E,aAAalF,MAAMkF,WAApB,EAAiCgE,gBAAjC,EAApB;AACA,QAAIsG,KAAKxP,MAAMmF,KAAN,CAAYQ,MAAZ,CAAoB;AAAA,aAAK8J,EAAE9G,EAAF,IAAQO,OAAb;AAAA,KAApB,EAA2C,CAA3C,CAAT;AACA,WAAO,EAAE9D,MAAMoK,EAAR,EAAP;AACD,GAL0B;AAAA,CAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBP;;AACA;;AAEO,IAAMvP,4BAAU;AACrBqO,aAAW;AAAA,WAAM,iBAAS;AACxBc,aAAOC,OAAP,GAAiBrP,KAAjB;AACA6L,cAAQuC,GAAR,CAAY,QAAZ,EAAsBpO,KAAtB;AACD,KAHU;AAAA,GADU;AAKrBiK,mCALqB;AAMrBoE,mCANqB;AAOrBT,6BAPqB;AAQrB2B,6BARqB;AASrBrF;AATqB,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEHP,IAAIwF,YAAY,IAAhB;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,gBAAYE,cAAZ;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAIC,KAAJ,EAAN;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,QAAIkE,UAAU,CAAC,KAAKlE,IAAImE,KAAV,EAAiBC,KAAjB,CAAuB,gCAAvB,CAAd;AACA,QAAIF,OAAJ,EAAa;AACX,aAAOG,WAAWH,QAAQ,CAAR,CAAX,CAAP;AACD;AACF;;AAED,SAAO,GAAP;AACD;;AAED,SAASG,UAAT,CAAoBC,GAApB,EAAyB;AACvB,SAAO,CAAC,KAAKA,GAAN,EAAW1J,OAAX,CAAmB,uCAAnB,EAA4D,IAA5D,IAAoE,GAA3E;AACD;;AAED2J,QAAQP,YAAR,GAAuBD,kBAAvB;AACAQ,QAAQF,UAAR,GAAqBA,UAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA,IAAIG,SAASC,QAAQ,cAAR,CAAb;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACxB,MAAIC,UAAUD,KAAKE,SAAL,EAAd;AACAD,UAAQE,MAAR,GAAiB,YAAY;AAC3BH,SAAKI,MAAL;AACD,GAFD;AAGAH,UAAQI,IAAR,GAAeL,KAAKK,IAAL,CAAUvF,KAAV,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCzE,KAAKiK,GAAL,EAA/C;AACAN,OAAKO,UAAL,CAAgBrM,YAAhB,CAA6B+L,OAA7B,EAAsCD,KAAKQ,WAA3C;AACD;;AAED,IAAIC,aAAa,IAAjB;AACA,SAASC,SAAT,GAAqB;AACnB,MAAID,UAAJ,EAAgB;AACd;AACD;;AAEDA,eAAavP,WAAW,YAAY;AAClC,QAAIyP,QAAQ1N,SAAS2N,gBAAT,CAA0B,wBAA1B,CAAZ;AACA,SAAK,IAAItP,IAAI,CAAb,EAAgBA,IAAIqP,MAAMzR,MAA1B,EAAkCoC,GAAlC,EAAuC;AACrC,UAAIuO,OAAOH,UAAP,CAAkBiB,MAAMrP,CAAN,EAAS+O,IAA3B,MAAqCR,OAAOR,YAAP,EAAzC,EAAgE;AAC9DU,mBAAWY,MAAMrP,CAAN,CAAX;AACD;AACF;;AAEDmP,iBAAa,IAAb;AACD,GATY,EASV,EATU,CAAb;AAUD;;AAEDI,OAAOjB,OAAP,GAAiBc,SAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AF7BA;;AACA;;AACA;;AACA;;AACA;;AAEA,mBAAIjR,YAAJ,EAAWC,gBAAX,EAAoBC,UAApB,EAA0BsD,SAASoL,IAAnC","file":"app.a53ec1a7.map","sourceRoot":"..","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","export const state = {\r\n  activity_id: '499a63ab-971f-4edd-9c7d-a18b21227f7e',\r\n  users: [],\r\n  user: {},\r\n  lrsdata: [],\r\n  items: [],\r\n  seen: [],\r\n  displaydata: [],\r\n}","export const uniq = ar => ar.filter( (v, i, s) => s.indexOf(v) === i )\r\nexport const pluck = (ele) => (arr) => arr.map( a => a[ele] )\r\nexport const sortByProp = (p) => (a,b) => a[p] < b[p] ? -1 : (a[p] > b[p] ? 1 : 0)\r\nexport const stripBadChars = str => str.replace(/\\W/g, '-')\r\n\r\nexport const display_time = (stamp) => {\r\n  let currentDate = new Date(stamp),\r\n    day = currentDate.getDate(),\r\n    month = currentDate.getMonth() + 1,\r\n    year = currentDate.getFullYear(),\r\n    hours = currentDate.getHours(),\r\n    minutes = currentDate .getMinutes();\r\n\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n\r\n  let suffix = hours >= 12 ? \"PM\" : \"AM\";\r\n  // hours = suffix === 'PM' ? hours - 12 : hours;\r\n  hours = hours === 0 ? 12 : hours;\r\n  return `${year}-${month}-${day} ${hours}:${minutes} ${suffix}`\r\n}\r\nexport const datestamp = record => {\r\n  return display_time(record.context.timing.timestamp) + ' ' + record.context.timing.timezone;\r\n}\r\n\r\n\r\nexport const time_from_seconds = (time) => {\r\n  let hrs = Math.floor(time / 3600)\r\n  let mins = Math.floor((time % 3600) / 60)\r\n  let secs = Math.round(time % 60)\r\n  let hrstr = hrs > 0 ? `${hrs}h ` : ''\r\n  let minstr = mins > 0 ? `${mins}m ` : ''\r\n  return `${hrstr}${minstr}${secs}s`;\r\n}","import { h } from 'hyperapp'\r\nimport { uniq, pluck } from '../lib/lib'\r\n\r\nconst UserRow = ({user, clickFn}) => (\r\n  <tr>\r\n    <td class='tiny'>\r\n      <a onclick={ (e) => clickFn(user.id) }>{user.external_id || 'XXX'} - {user.email}</a>\r\n      </td>\r\n  </tr>\r\n)\r\n\r\nexport const UserTable = ({ users, select }) => (\r\n  <table id='usertable'>\r\n  <thead>\r\n    <th>Users</th>\r\n  </thead>\r\n  <tbody>\r\n    {users.map( user => (\r\n      <UserRow user={user}\r\n        clickFn={select}\r\n      ></UserRow>\r\n    ))}\r\n  </tbody>\r\n  </table>\r\n)","import { h } from 'hyperapp'\r\nimport { display_time, time_from_seconds, sortByProp } from '../lib/lib'\r\n\r\nconst LrsRow = ({row}) => (\r\n  <tr>\r\n    <td class='tiny'>{row.user_id}</td>\r\n    <td class='tiny'>{row.context.item_id}</td>\r\n    <td>{row.verb}</td>\r\n    <td>{time_from_seconds(row.context.timing.timer.total)}</td>\r\n    <td>{row.context.chosen_answer}</td>\r\n    <td>{row.context.correct ? \"Yes\" : ''}</td>\r\n    <td class='tiny'>{display_time(row.context.timing.timestamp)} {row.context.timing.timezone}</td>\r\n    <td class='tiny'>{display_time(row.timestamp)}</td>\r\n  </tr>\r\n)\r\n\r\nexport const DataTable = ({ data }) => (\r\n  <table id='datatable'>\r\n    <thead>\r\n      <th>User</th>\r\n      <th>Item</th>\r\n      <th>Verb</th>\r\n      <th>Time</th>\r\n      <th>Chosen Answer</th>\r\n      <th>Correct?</th>\r\n      <th>User Timestamp</th>\r\n      <th>Server Timestamp</th>\r\n    </thead>\r\n    <tbody>\r\n      {data.sort( sortByProp('timestamp') ).map(row => (\r\n        <LrsRow row={row} />\r\n      ))}\r\n    </tbody>\r\n  </table>\r\n)\r\n","import { h } from 'hyperapp'\r\n\r\nconst TextInput = ({field, func, init, label}) => (\r\n  <label for={field}\r\n    onclick={ e => func(init) }\r\n  >\r\n    {label}:&nbsp;\r\n    <input\r\n      name={field}\r\n      type='text'\r\n      class='input_text'\r\n      value={init}\r\n      oninput={ e => func(e.target.value) }\r\n    />\r\n  </label>\r\n)\r\n\r\nexport const InputFields = ({state, actions}) => (\r\n  <div class='inputs'>\r\n    <TextInput\r\n      field='activity_id'\r\n      func={actions.get_records}\r\n      init={state.activity_id}\r\n      label=\"Activity UUID\"\r\n    />\r\n    <TextInput\r\n      field='user_id'\r\n      func={actions.user_select}\r\n      init={state.user.id}\r\n      label=\"User UUID\"\r\n    />\r\n  </div>\r\n)","import { h } from 'hyperapp'\r\n\r\nexport const Demographics = ({state}) => (\r\n<demographics appointmentid=\"\" functioncode=\"\" workstationname=\"\">\r\n  <demographic name=\"CandidateFirstName\" value={state.user.firstname} />\r\n  <demographic name=\"CandidateLastName\" value={state.user.lastname} />\r\n  <demographic name=\"AuthorizationNumber\" value={state.user.external_id} />\r\n  <demographic name=\"email\" value={state.user.email} />\r\n</demographics>\r\n)","const getByVerb = verb => rs => rs.find( i => i.verb === verb )\r\nconst correctAttempt = rs => rs.find(i => (i.context.correct === true))\r\nconst gradedAttempt = rs => correctAttempt(rs) || getByVerb('second_attempt')(rs)\r\n\r\nexport const iscorrect = rs => correctAttempt(rs) ? 1 : 0\r\n\r\nexport const total_duration = rs => (\r\n  rs.reduce((t, r) => (t + r.context.timing.timer.total), 0).toFixed(3)\r\n)\r\n\r\nexport const duration_of = verb => rs => {\r\n  let r = getByVerb(verb)(rs)\r\n  return r ? r.context.timing.timer.total : 0\r\n}\r\n\r\nexport const correctAnswerLetter = (rs, item) => {\r\n  const letters = \"ABCDE\".split('')\r\n  const ga = gradedAttempt(rs)\r\n  let result = {guess: '', correct: ''}\r\n  if (ga === undefined) {\r\n    // the user attempted the first time, got it wrong, didnt do a 2nd attempt\r\n    return \"\"\r\n  }\r\n  try {\r\n    item.responses.forEach((r,i) => {\r\n      if(r.displayText === ga.context.chosen_answer) { result.guess = letters[i] }\r\n      if(r.type[0] === 'correct') { result.correct = letters[i] }\r\n    })\r\n    return result\r\n  }\r\n  catch (err) {\r\n    console.warn(\"RS\",rs)\r\n    console.warn(\"Item\",item)\r\n    console.warn(\"GA\",ga)\r\n    return \"\"\r\n  }\r\n\r\n}\r\n\r\nexport const presented = (rs, seen) => seen || rs.length > 0 ? 1 : 0\r\nexport const attempted = rs => rs.find(i => i.verb === 'first_attempt') ? 1 : 0\r\nexport const completed = rs => skipped(rs) ? 0 : 1\r\nexport const skipped = (rs, seen) => {\r\n  let first = getByVerb('first_attempt')(rs)\r\n  let second = getByVerb('second_attempt')(rs)\r\n  let cor = iscorrect(rs)\r\n  return first && !cor && !second ? 1 : 0\r\n}","import { sortByProp } from '../../lib/lib'\r\n\r\nconst groupByItemId = arr => {\r\n  return arr.reduce((rv, x) => {\r\n    let v = x.context.item_id;\r\n    let el = rv.find((r) => r && r[0].context.item_id === v);\r\n    if (el) { el.push(x); }\r\n    else { rv.push([x]); }\r\n    return rv;\r\n  }, []);\r\n};\r\n\r\nexport const sortAndGroupRecords = lrs => (\r\n  groupByItemId( lrs.sort(sortByProp('timestamp')) )\r\n)","import { iscorrect } from \"./calc_item\";\r\nimport { sortAndGroupRecords } from './counts'\r\n\r\nconst ITEMS = 175\r\n\r\nexport const count_correct = rs => (\r\n  sortAndGroupRecords(rs).reduce((tot, i) => (tot + iscorrect(i)), 0)\r\n)\r\nexport const count_incorrect = rs => (\r\n  sortAndGroupRecords(rs).reduce((tot, i) => (tot + (iscorrect(i) ? 0 : 1)), 0)\r\n)\r\nexport const count_skipped = rs => ITEMS - count_correct(rs) - count_incorrect(rs)\r\nexport const percentage_correct = rs => (count_correct(rs) * 100 / ITEMS).toFixed(2)","import  { h } from 'hyperapp'\r\nimport  { count_correct,\r\n          count_incorrect,\r\n          count_skipped } from './calc_score'\r\n\r\nexport const Categories = ({data, state}) => (\r\n  <categories>\r\n    <category name=\"hand_surgery\"\r\n      count=\"175\"\r\n      countcorrect={count_correct(data)}\r\n      countincorrect={count_incorrect(data)}\r\n      countskipped={count_skipped(data)}\r\n      countmarked=\"0\"\r\n    >\r\n    </category>\r\n  </categories>\r\n)","import { h } from 'hyperapp'\r\nimport { sortAndGroupRecords } from './counts'\r\nimport  { iscorrect,\r\n          total_duration,\r\n          duration_of,\r\n          attempted,\r\n          presented,\r\n          correctAnswerLetter,\r\n          completed,\r\n          skipped\r\n        } from './calc_item'\r\n\r\n// TODO: Need some extra data from the Sequence\r\n// which will give me items that were SEEN...\r\n// but may not have attempts and LRS records\r\n\r\nconst ItemGroup = ({records, item, seen}) => (\r\n  <itemgroup\r\n    id={records[0].context.item_id}\r\n    name={item.external_id[0]}\r\n    scored={iscorrect(records)}\r\n    duration={total_duration(records)}\r\n    durationFirstAttempt={duration_of('first_attempt')(records)}\r\n    durationRationale={duration_of('rationale_time')(records)}\r\n    durationSecondAttempt={duration_of('second_attempt')(records)}\r\n    progid=\"UTDP.MultiChoiceItem.1\"\r\n    weight=\"1\"\r\n    presented={presented(records, seen)}\r\n    visited={attempted(records)}\r\n    >\r\n    <item\r\n      response={correctAnswerLetter(records, item).guess}\r\n      correctresponse={correctAnswerLetter(records, item).correct}\r\n      score={iscorrect(records)}\r\n      scoremin=\"0\"\r\n      scoremax=\"1\"\r\n      scorenom=\"0\"\r\n      complete={completed(records)}\r\n      skipped={skipped(records, seen)}\r\n      marked=\"0\" />\r\n  </itemgroup>\r\n)\r\n\r\nexport const Items = ({data, state}) => (\r\n  sortAndGroupRecords(data)\r\n    .map( ir => (<ItemGroup records={ir} \r\n      item={state.items.filter( i => i.id === ir[0].context.item_id)[0]}\r\n      seen={state.seen.indexOf(ir[0].context.item_id) > -1} />))\r\n)","import  { h } from 'hyperapp'\r\nimport  { Items } from './items'\r\nimport  { datestamp } from '../../lib/lib'\r\nimport  { total_duration } from './calc_item'\r\nimport  { count_correct,\r\n          count_incorrect,\r\n          count_skipped,\r\n          percentage_correct } from './calc_score'\r\n\r\nexport const Sections = ({data, state}) => (\r\n  <sections>\r\n    <section name=\"hand_exam\"\r\n      count=\"175\"\r\n      countcorrect={count_correct(data)}\r\n      countincorrect={count_incorrect(data)}\r\n      countskipped={count_skipped(data)}\r\n      countmarked=\"0\"\r\n      startdatetime={datestamp(data[0])}\r\n      enddatetime={datestamp(data[data.length - 1])}\r\n      duration={total_duration(data)}\r\n      >\r\n      <score\r\n        scorevalue={count_correct(data)}\r\n        scoredisplay={percentage_correct(data)}\r\n        passindicator=\"p\"\r\n        scoremin=\"0\"\r\n        scoremax=\"175\"\r\n        scorecut=\"0\"\r\n        />\r\n      <Items data={data} state={state} />\r\n    </section>\r\n  </sections>\r\n)","import { h } from 'hyperapp'\r\nimport { Categories } from './categories'\r\nimport { Sections } from './sections'\r\nimport { datestamp, stripBadChars } from '../../lib/lib'\r\nimport  { total_duration } from './calc_item'\r\nimport  { count_correct,\r\n          count_incorrect,\r\n          count_skipped,\r\n          percentage_correct } from './calc_score'\r\n\r\nexport const Exam = ({data, state}) => (\r\n  <exam\r\n    resourcefilename={`${state.user.external_id}-${stripBadChars(state.user.lastname).toLowerCase()}.xml`}\r\n    resourceversion=\"1.0\"\r\n    name=\"MOC-HANDEXAM\"\r\n    examformname=\"HANDEXAM\"\r\n    driverversion=\"9.1.1 Build #0 (UTD 9.1 CORE (A))\"\r\n    startdatetime={datestamp(data[0])}\r\n    enddatetime={datestamp(data[data.length - 1])}\r\n    duration={total_duration(data)}\r\n    restartcount=\"0\"\r\n    count=\"175\"\r\n    countcorrect={count_correct(data)}\r\n    countincorrect={count_incorrect(data)}\r\n    countskipped={count_skipped(data)}\r\n    countmarked=\"0\"\r\n    functioncode=\"\"\r\n    workstationname=\"\"\r\n    >\r\n    <score\r\n      scorevalue={count_correct(data)}\r\n      scoredisplay={percentage_correct(data)}\r\n      passindicator=\"p\"\r\n      scoremin=\"0\"\r\n      scoremax=\"175\"\r\n      scorecut=\"0\"\r\n      />\r\n    <Sections data={data} state={state} />\r\n    <Categories data={data} state={state} />\r\n  </exam>\r\n)","import { h } from 'hyperapp'\r\nimport { Demographics } from './demographics'\r\nimport { Exam } from './exam'\r\nimport { sortAndGroupRecords } from './counts'\r\nimport  { total_duration } from './calc_item'\r\nimport { time_from_seconds } from '../../lib/lib'\r\nimport  { count_correct,\r\n          count_skipped,\r\n          count_incorrect,\r\n          percentage_correct } from './calc_score'\r\n\r\nconst DocXML = ({state}) => (\r\n  <simpleXMLResult xmlns=\"http://sdk.prometric.com/schemas/SimpleXMLResults1_3\" version=\"1.3\">\r\n    <Demographics state={state} />\r\n    { state.displaydata[0] ? (<Exam data={state.displaydata} state={state} />) : null }\r\n  </simpleXMLResult>\r\n)\r\n\r\nexport const Report = ({state}) => (\r\n<div id='report'>\r\n  <button id='download_reportdoc'>Download Report XML</button>\r\n  <ul class='data'>\r\n    <li>Board ID: {state.user.external_id}</li>\r\n    <li>Name: {state.user.firstname} {state.user.lastname}</li>\r\n    <li>Records: {state.displaydata.length}</li>\r\n    <li>Unique Items: {sortAndGroupRecords(state.displaydata).length}</li>\r\n    <li>Correct: {count_correct(state.displaydata)}</li>\r\n    <li>Wrong: {count_incorrect(state.displaydata)}</li>\r\n    <li>Skipped: {count_skipped(state.displaydata)}</li>\r\n    <li>Score: {percentage_correct(state.displaydata)}</li>\r\n    <li>Duration: {time_from_seconds(total_duration(state.displaydata))}</li>\r\n  </ul>\r\n  <script id='reportdoc'>\r\n    <DocXML state={state} />\r\n  </script>\r\n</div>\r\n)","import { h } from 'hyperapp';\r\nimport { state } from './state';\r\nimport { UserTable } from './components/usertable'\r\nimport { DataTable } from './components/datatable'\r\nimport { InputFields } from './components/inputs'\r\nimport { Report } from './components/report/report'\r\n\r\nconst no_user = actions => (\r\n  <button\r\n  class=\"fetch_users\"\r\n  onclick={ e => actions.get_users() }\r\n  >Fetch Users</button>\r\n)\r\n\r\nconst selected_user = user => (\r\n  <h3>\r\n    <em>{ user.id }</em>\r\n    { user.email }\r\n  </h3>\r\n)\r\n\r\nexport const view = (state, actions) => (\r\n  <section>\r\n    <h2>Search Propel2 LRS</h2>\r\n    <InputFields state={state} actions={actions} />\r\n    <br />\r\n    { state.user.id ? selected_user(state.user) : no_user(actions) }\r\n    <Report state={state}></Report>\r\n    <div class='tables'>\r\n      <UserTable users={state.users} select={actions.user_select} />\r\n      <DataTable data={state.displaydata}></DataTable>\r\n    </div>\r\n  </section>\r\n);","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var _ret = function () {\n        var argsIndex = pendingArgs.length - 1;\n        return {\n          v: deferred.promise.then(function (results) {\n            return results[argsIndex];\n          })\n        };\n      }();\n\n      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","export const endpoint = 'https://4ibvog74h7.execute-api.us-east-1.amazonaws.com/dev';\r\n","import debounce from 'debounce-promise'\r\nimport {endpoint} from './api'\r\n\r\nconst fetch_lrsdata = (activity_id, user_id) =>\r\n  fetch(`${endpoint}/lrs/activities/${activity_id}?user_id=${user_id}`)\r\n    .then(res => res.json())\r\nconst get_lrsdata = debounce(fetch_lrsdata, 700);\r\n\r\nexport const get_records = ({activity_id, user_id}) => (state, actions) => {\r\n  console.log('get_records', activity_id, user_id)\r\n  get_lrsdata(activity_id, user_id)\r\n    .then(actions.set_lrsdata)\r\n    .then(actions.log_state)\r\n  return { activity_id, displaydata: [] }\r\n};\r\n\r\nexport const set_lrsdata = data => (\r\n  { lrsdata: data, displaydata: data.lrs, items: data.items, seen: data.sequence.previousMeasures.values }\r\n);","import { stripBadChars } from '../lib/lib'\r\n\r\nconst download = (filename, body) => {\r\n  let element = document.createElement('a');\r\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(body));\r\n  element.setAttribute('download', filename);\r\n  element.innerHTML = \"really download\";\r\n  element.style.display = 'none';\r\n  document.getElementById('report').appendChild(element);\r\n  element.click();\r\n  document.getElementById('report').removeChild(element);\r\n}\r\n\r\nexport const setup_download_button = () => {\r\n  console.log(\"setup_download_button\")\r\n  document.getElementById('download_reportdoc').addEventListener('click', () => {\r\n    const prefix = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\r\n    const body = document.getElementById('reportdoc').innerHTML;\r\n    const filename = `${window.__state.user.external_id}-${stripBadChars(window.__state.user.lastname).toLowerCase()}.xml`;\r\n    download(filename, prefix+body);\r\n  })  \r\n}","import debounce from 'debounce-promise'\r\nimport {endpoint} from './api'\r\nimport { setup_download_button } from './download_xml'\r\n\r\nconst fetch_users = (actions) =>\r\n  fetch(`${endpoint}/users`)\r\n    .then(res => res.json())\r\n\r\nexport const get_users = () => (state, actions) => {\r\n  setup_download_button();\r\n  fetch_users(actions)\r\n    .then(actions.set_users)\r\n    .then(actions.log_state)\r\n  return {}\r\n};\r\n\r\nexport const set_users = (users) => ({ users })\r\n\r\nexport const user_select = user_id => (state, actions) => {\r\n  console.log('user_id', user_id)\r\n  actions.get_records({activity_id: state.activity_id, user_id})\r\n  let uu = state.users.filter( u => u.id == user_id )[0]\r\n  return { user: uu }\r\n};","import { get_records, set_lrsdata } from './records'\r\nimport { get_users, set_users, user_select } from './users'\r\n\r\nexport const actions = {\r\n  log_state: () => state => {\r\n    window.__state = state;\r\n    console.log(\"state:\", state);\r\n  },\r\n  get_records,\r\n  set_lrsdata,\r\n  get_users,\r\n  set_users,\r\n  user_select,\r\n}","import { app } from 'hyperapp';\r\nimport { view } from './view';\r\nimport { state } from './state';\r\nimport { actions } from './actions/actions';\r\nimport './app.scss';\r\n\r\napp(state, actions, view, document.body);\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}